import { Spinner } from "std-widgets.slint";
import { Theme } from "../theme.slint";
import { GlassCard } from "./GlassCard.slint";

// Stats Card Component
export component StatsCard inherits GlassCard {
    in property <bool> has-results: false;
    in property <bool> is-scanning: false;
    in property <string> total-size-display: "0.00 GB";
    in property <int> total-items: 0;
    
    height: 200px;
    
    // Acessibilidade
    accessible-role: text;
    accessible-label: is-scanning ? "Scanning system" : 
                     has-results ? "Found " + total-size-display + " in " + total-items + " files" :
                     "Welcome to PCCLEAN";
    
    VerticalLayout {
        padding: Theme.spacing-xl;
        spacing: 12px;
        alignment: center;
        
        // Estado inicial - Bem-vindo
        if !has-results && !is-scanning: VerticalLayout {
            spacing: Theme.spacing-medium;
            alignment: center;
            
            Text {
                text: "ðŸ‘‹";
                font-size: 64px;
                horizontal-alignment: center;
            }
            
            Text {
                text: "Welcome to PCCLEAN";
                font-size: 24px;
                font-weight: 600;
                color: Theme.text-primary;
                horizontal-alignment: center;
                vertical-alignment: center;
            }
            
            Text {
                text: "Click 'Start Scan' to analyze your system";
                font-size: 14px;
                color: Theme.text-secondary;
                horizontal-alignment: center;
                vertical-alignment: center;
            }
        }
        
        // Estado de scanning
        if is-scanning: VerticalLayout {
            spacing: Theme.spacing-medium;
            alignment: center;
            
            Spinner {
                width: 48px;
                height: 48px;
            }
            
            Text {
                text: "Scanning your system...";
                font-size: 16px;
                color: Theme.text-secondary;
                horizontal-alignment: center;
                vertical-alignment: center;
            }
        }
        
        // Estado com resultados
        if has-results && !is-scanning: VerticalLayout {
            spacing: 12px;
            alignment: center;
            
            total-size-text := Text {
                text: total-size-display;
                font-size: 64px;
                font-weight: 700;
                color: Theme.primary;
                horizontal-alignment: center;
                vertical-alignment: center;
                
                // AnimaÃ§Ã£o ao aparecer
                opacity: 0;
                animate opacity {
                    duration: 500ms;
                    easing: ease-out;
                }
            }
            
            states [
                visible when has-results: {
                    total-size-text.opacity: 1;
                }
            ]
            
            Text {
                text: total-items + " files detected";
                font-size: 14px;
                color: Theme.text-secondary;
                horizontal-alignment: center;
                vertical-alignment: center;
            }
        }
    }
}
