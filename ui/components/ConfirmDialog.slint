import { Theme } from "../theme.slint";
import { ModernButton } from "./ModernButton.slint";

// Diálogo de confirmação
export component ConfirmDialog inherits Rectangle {
    in property <bool> show: false;
    
    callback confirmed <=> confirm-button.clicked;
    callback cancelled <=> cancel-button.clicked;
    
    visible: show;
    
    // Overlay escuro
    background: rgba(0, 0, 0, 0.7);
    
    // Acessibilidade
    accessible-role: none;
    accessible-label: "Confirm cleanup operation";
    
    // Animação de fade-in
    opacity: show ? 1 : 0;
    animate opacity {
        duration: 200ms;
        easing: ease-out;
    }
    
    // Click fora do modal para cancelar
    TouchArea {
        clicked => {
            cancelled();
        }
    }
    
    // Modal
    modal := Rectangle {
        width: 480px;
        height: 320px;
        x: (parent.width - self.width) / 2;
        y: (parent.height - self.height) / 2;
        background: rgba(20, 20, 40, 0.98);
        border-radius: Theme.radius-xl;
        border-width: 1.5px;
        border-color: Theme.primary;
        drop-shadow-blur: 40px;
        drop-shadow-color: rgba(139, 92, 246, 0.3);
        
        // Animação suave ao aparecer
        opacity: show ? 1 : 0;
        animate opacity {
            duration: 300ms;
            easing: ease-out;
        }
        
        // Prevenir propagação do click
        TouchArea { }
        
        VerticalLayout {
            padding: Theme.spacing-xl;
            spacing: Theme.spacing-medium;
            alignment: center;
            
            Text {
                text: "⚠️";
                font-size: 48px;
                horizontal-alignment: center;
            }
            
            Text {
                text: "Confirm Cleanup";
                font-size: 24px;
                font-weight: 700;
                color: Theme.text-primary;
                horizontal-alignment: center;
                vertical-alignment: center;
            }
            
            Text {
                text: "Are you sure you want to delete the selected files?";
                font-size: 14px;
                color: Theme.text-secondary;
                horizontal-alignment: center;
                vertical-alignment: center;
                wrap: word-wrap;
            }
            
            Text {
                text: "This action cannot be undone";
                font-size: 13px;
                color: Theme.danger;
                horizontal-alignment: center;
                vertical-alignment: center;
            }
            
            Rectangle {
                height: Theme.spacing-large;
            }
            
            HorizontalLayout {
                spacing: 12px;
                alignment: center;
                
                confirm-button := ModernButton {
                    text: "✓ Confirm";
                    primary: false;
                    width: 140px;
                }
                
                cancel-button := ModernButton {
                    text: "✗ Cancel";
                    primary: true;
                    width: 140px;
                }
            }
        }
    }
}
